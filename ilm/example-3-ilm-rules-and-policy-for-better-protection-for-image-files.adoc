---
permalink: ilm/example-3-ilm-rules-and-policy-for-better-protection-for-image-files.html 
sidebar: sidebar 
keywords:  
summary:  
---
= 例 3 ：画像ファイルの保護を強化する ILM ルールとポリシー
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
以下に記載するサンプルルールとポリシーを使用して、200KBを超える画像をイレイジャーコーディングし、200KB以下の画像からコピーを3つ作成できます。


CAUTION: 以下の ILM ルールとポリシーは一例にすぎません。ILM ルールを設定する方法は多数あります。新しいポリシーをアクティブ化する前に、ドラフトポリシーをシミュレートして、コンテンツの損失を防ぐためにドラフトポリシーが想定どおりに機能することを確認してください。



== 例3のILMルール1：200KBを超える画像ファイルにイレイジャーコーディングを使用

このILMルールの例では、高度なフィルタリングを使用して、200KBを超えるすべての画像ファイルをイレイジャーコーディングします。

[cols="1a,2a"]
|===
| ルール定義 | 値の例 


 a| 
ルール名
 a| 
ECイメージファイル>200KB



 a| 
参照時間
 a| 
取り込み時間



 a| 
ユーザメタデータの高度なフィルタリング
 a| 
ユーザメタデータタイプはイメージファイルと同じです



 a| 
オブジェクトサイズの高度なフィルタリング
 a| 
オブジェクトサイズ（MB）が0.2より大きい



 a| 
コンテンツ配置
 a| 
3 つのサイトを使用して 2+1 のイレイジャーコーディングコピーを作成

|===
image:../media/policy_3_rule_1_ec_images_adv_filtering.gif["例3のILMルール1：200KBを超える画像ファイルにイレイジャーコーディングを使用"]

このルールはポリシー内の最初のルールとして設定されているため、イレイジャーコーディングの配置手順では200KBを超える環境 イメージのみが使用されます。

image::../media/policy_2_rule_1_ec_objects_placements.png[例3のILMルール1：200KBを超える画像ファイルにイレイジャーコーディングを使用]



== 例3のILMルール2：残りのすべてのイメージファイルのコピーを3つレプリケートします

このILMルールの例では、高度なフィルタリングを使用して、イメージファイルをレプリケートするように指定します。

[cols="1a,2a"]
|===
| ルール定義 | 値の例 


 a| 
ルール名
 a| 
画像ファイル用に3つのコピー



 a| 
参照時間
 a| 
取り込み時間



 a| 
ユーザメタデータの高度なフィルタリング
 a| 
ユーザメタデータタイプはイメージファイルと同じです



 a| 
コンテンツ配置
 a| 
レプリケートされたコピーをすべてのストレージノードに3つ作成します

|===
image:../media/policy_3_rule_2_copies_for_images_adv_filtering.gif["例3のILMルール2：残りのすべてのイメージファイルのコピーを3つレプリケートします"]

ポリシー内の最初のルールは200KBを超える画像ファイルにすでに一致しているため、この配置手順は200KB以下の画像ファイルにのみ適用されます。

image::../media/policy_3_rule_2_copies_for_images_placements.png[例3のILMルール2：残りのすべてのイメージファイルのコピーを3つレプリケートします]



== 例 3 の ILM ポリシー：画像ファイルの保護の強化

この例では、ILMポリシーで3つのILMルールを使用して、200KB（0.2MB）を超える画像ファイルをイレイジャーコーディングし、200KB以下の画像ファイルのレプリケートコピーを作成し、画像以外のファイルについては2つのレプリケートコピーを作成するポリシーを作成します。

この例のILMポリシーには、次の処理を実行するルールが含まれています。

* 200KBを超えるすべての画像ファイルをイレイジャーコーディングします。
* 残りの（200KB以下の）画像ファイルのコピーを3つ作成します。
* 残りのすべてのオブジェクト（つまり、すべての非イメージファイル）にデフォルトルールを適用します。


image::../media/policy_3_configured_policy.gif[例 3 の ILM ポリシー：画像ファイルの保護の強化]
