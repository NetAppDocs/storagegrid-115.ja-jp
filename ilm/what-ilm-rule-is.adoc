---
permalink: ilm/what-ilm-rule-is.html 
sidebar: sidebar 
keywords:  
summary: オブジェクトを管理するには、一連の情報ライフサイクル管理（ ILM ）ルールを作成して 1 つの ILM ポリシーにまとめます。システムに取り込まれた各オブジェクトは、アクティブポリシーに照らして評価されます。ポリシー内のルールがオブジェクトのメタデータに一致すると、ルールの説明によって、 StorageGRID がそのオブジェクトをコピーして格納するために実行するアクションが決まります。 
---
= ILM ルールとは
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
オブジェクトを管理するには、一連の情報ライフサイクル管理（ ILM ）ルールを作成して 1 つの ILM ポリシーにまとめます。システムに取り込まれた各オブジェクトは、アクティブポリシーに照らして評価されます。ポリシー内のルールがオブジェクトのメタデータに一致すると、ルールの手順に従って、 StorageGRID がそのオブジェクトをコピーして格納します。

ILM ルールでは次の項目を定義

* 格納するオブジェクト。ルールはすべてのオブジェクトに適用することも、ルール環境 を構成するオブジェクトを特定するフィルタを指定することもできます。たとえば、特定のテナントアカウント、特定の S3 バケットまたは Swift コンテナ、または特定のメタデータ値に関連付けられたオブジェクトにのみルールを適用できます。
* ストレージのタイプと場所。オブジェクトは、ストレージノード、クラウドストレージプール、またはアーカイブノードに格納できます。
* 作成するオブジェクトコピーのタイプ。コピーはレプリケートまたはイレイジャーコーディングできます。
* レプリケートコピーの場合は、作成されるコピーの数。
* イレイジャーコーディングコピーにはイレイジャーコーディングスキームを使用します。
* オブジェクトのストレージの場所とコピーのタイプの経時的変化。
* オブジェクトがグリッドに取り込まれるときにオブジェクトデータを保護する方法（同期配置またはデュアルコミット）。


オブジェクトメタデータは ILM ルールによって管理されません。代わりに、オブジェクトメタデータはメタデータストア内の Cassandra データベースに格納されます。データを損失から保護するために、オブジェクトメタデータの 3 つのコピーが各サイトで自動的に維持されます。コピーはすべてのストレージノードに均等に分散されます。



== ILM ルールの要素

ILM ルールには次の 3 つの要素があります。

* * フィルタ条件 * ：ルールの基本フィルタと高度なフィルタにより、ルール環境 で使用するオブジェクトが定義されます。オブジェクトがすべてのフィルタに一致する場合、 StorageGRID はルールを適用し、ルールの配置手順で指定されたオブジェクトコピーを作成します。
* * 配置手順 * ：ルールの配置手順によって、オブジェクトコピーの数、タイプ、および場所が定義されます。各ルールに一連の配置手順を含めることで、時間の経過に伴うオブジェクトコピーの数、タイプ、場所を変更することができます。1 つの配置の期間が終了すると、次の配置手順が次の ILM 評価で自動的に適用されます。
* * 取り込み動作 * ：ルールの取り込み動作は、 S3 または Swift クライアントがオブジェクトをグリッドに保存する際の処理を定義します。取り込み動作は、ルールの手順に従ってオブジェクトコピーがすぐに配置されるか、または中間コピーが作成されて配置手順があとから適用されるかを制御します。




== ILM ルールの例

次の ILM ルールの例では、テナント A に属するオブジェクトの環境 を設定しますこれらのオブジェクトのレプリケートコピーを 2 つ作成し、各コピーを別々のサイトに格納します。この 2 つのコピーは「無期限」に保持されます。つまり、 StorageGRID はこれらのコピーを自動的に削除しません。これらのオブジェクトは、クライアントの削除要求によって削除されるか、バケットライフサイクルが終了するまで、 StorageGRID によって保持されます。

このルールでは、取り込み動作に Balanced オプションが使用されます。 2 つのサイトの配置手順は、テナント A がオブジェクトを StorageGRID に保存するとすぐに適用されます。ただし、両方の必要なコピーをただちに作成することはできません。たとえば、テナント A がオブジェクトを保存したときにサイト 2 に到達できない場合、 StorageGRID はサイト 1 のストレージノードに 2 つの中間コピーを作成します。サイト 2 が使用可能になると、 StorageGRID はそのサイトで必要なコピーを作成します。

image::../media/ilm_example_rule_2_copies_tenant_a.png[例： ILM ルール 2 ではテナント A がコピーされます]

.関連情報
link:data-protection-options-for-ingest.html["取り込みのデータ保護オプション"]

link:what-storage-pool-is.html["ストレージプールとは"]

link:what-cloud-storage-pool-is.html["クラウドストレージプールとは"]

link:how-objects-are-stored-replication-erasure-coding.html["オブジェクトの格納方法（レプリケーションまたはイレイジャーコーディング）"]

link:what-ilm-rule-filtering-is.html["ILM ルールのフィルタリングとは"]

link:what-ilm-placement-instructions-are.html["ILM ルールの配置手順とは"]
