---
permalink: ilm/simulating-ilm-policy.html 
sidebar: sidebar 
keywords:  
summary: ポリシーをアクティブ化して本番環境のデータに適用する前に、テストオブジェクトでドラフトポリシーをシミュレートする必要があります。シミュレーション期間は、アクティブ化して本番環境のデータに適用する前にポリシーを安全にテストするための、スタンドアロン環境を提供します。 
---
= ILMポリシーをシミュレートする
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ポリシーをアクティブ化して本番環境のデータに適用する前に、テストオブジェクトでドラフトポリシーをシミュレートする必要があります。シミュレーション期間は、アクティブ化して本番環境のデータに適用する前にポリシーを安全にテストするための、スタンドアロン環境を提供します。

.必要なもの
* Grid Managerにはサポートされているブラウザを使用してサインインする必要があります。
* 特定のアクセス権限が必要です。
* テストする各オブジェクトのS3バケット/オブジェクトキーまたはSwiftコンテナ/オブジェクト名を確認しておく必要があります。また、それらのオブジェクトを取り込んでおく必要があります。


.このタスクについて
ドラフトポリシーをテストするオブジェクトは慎重に選択する必要があります。ポリシーを確実にシミュレートするには、各ルールのフィルタごとに少なくとも 1 つのオブジェクトをテストする必要があります。

たとえば、バケット A のオブジェクトに一致するルールとバケット B のオブジェクトに一致するルールを含むポリシーを確実にテストするためには、少なくともバケット A から 1 つとバケット B から 1 つオブジェクトを選択する必要があります。ポリシーに他のすべてのオブジェクトを配置するデフォルトルールが含まれている場合は、別のバケットのオブジェクトを少なくとも1つテストする必要があります。

ポリシーをシミュレートする場合は、次の点を考慮します。

* ポリシーを変更したら、ドラフトポリシーを保存します。次に、保存したドラフトポリシーの動作をシミュレートします。
* ポリシーをシミュレートするとポリシー内の ILM ルールがテストオブジェクトをフィルタリングするため、各オブジェクトにどのルールが適用されたかを確認できます。ただし、オブジェクトのコピーは作成されず、配置もされません。シミュレーションを実行しても、データ、ルール、ポリシーはいっさい変更されません。
* シミュレーションページでは、 ILM ポリシーページを閉じるか別のページに移動するか更新するまで、テストしたオブジェクトが保持されます。
* シミュレーションは、一致したルールの名前を返します。どのストレージプールまたはイレイジャーコーディングプロファイルが有効かを確認するには、ルール名または詳細アイコンをクリックして保持図を表示します image:../media/icon_nms_more_details.gif["詳細アイコン"]。
* S3 のバージョン管理が有効な場合、ポリシーはオブジェクトの現在のバージョンに対してのみシミュレートされます。


.手順
. ルールを選択して配置し、ドラフトポリシーを保存します。
+
この例のポリシーには 3 つのルールがあります。

+
[cols="1a,1a,1a,1a"]
|===
| ルール名 | フィルタ | コピーのタイプ | 保持 


 a| 
男性用
 a| 
** テナント A
** ユーザメタデータ（シリーズ = x-men ）

 a| 
2 つのデータセンターに 2 つのコピーを保持
 a| 
2 年



 a| 
PNGs
 a| 
キーの末尾は .png です
 a| 
2 つのデータセンターに 2 つのコピーを保持
 a| 
5 年



 a| 
2 つのコピーで 2 つのデータセンターを構成し
 a| 
_ なし _
 a| 
2 つのデータセンターに 2 つのコピーを保持
 a| 
永遠に

|===
+
image:../media/ilm_policies_viewing_proposed.png["ドラフトの ILM ポリシーを表示中"]

. * Simulate *をクリックします。
+
Simulation ILM Policy （シミュレーション ILM ポリシー）ダイアログボックスが表示されます。

. * Object *フィールドに、テストオブジェクトのS3バケット/オブジェクトキーまたはSwiftコンテナ/オブジェクト名を入力し、* Simulate *をクリックします。
+
[NOTE]
====
取り込まれていないオブジェクトを指定するとメッセージが表示されます。

image::../media/object_not_available_for_simulation.gif[欠落オブジェクトを指定した場合に表示されるメッセージです]

====
. [ * シミュレーション結果 * （ Simulation Results ） ] で、各オブジェクトが正しいルールに一致していることを確認します。
+
この例では、を使用しています `Havok.png` および `Warpath.jpg` オブジェクトが「X-men」ルールに正しく一致しました。。 `Fullsteam.png` オブジェクト。には含まれません `series=x-men` ユーザメタデータは「X-men」ルールには一致しませんでしたが、「PNGs」ルールに正しく一致しました。3 つのオブジェクトがすべて他のルールに一致したため、デフォルトルールは使用されませんでした。

+
image::../media/ilm_policy_simulation_results.gif[シミュレーション結果]


