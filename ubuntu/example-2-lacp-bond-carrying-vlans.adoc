---
permalink: ubuntu/example-2-lacp-bond-carrying-vlans.html 
sidebar: sidebar 
keywords:  
summary: 例 2 は、ネットワークインターフェイスのボンディングおよび使用している Linux ディストリビューションでの VLAN インターフェイスの作成に関する十分な知識があることを前提としています。 
---
= 例 2 ： LACP ボンドを使用した VLAN の伝送
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
例 2 は、ネットワークインターフェイスのボンディングおよび使用している Linux ディストリビューションでの VLAN インターフェイスの作成に関する十分な知識があることを前提としています。

.このタスクについて
例 2 では、汎用の柔軟な VLAN ベースのスキームを使用して、使用可能なすべてのネットワーク帯域幅を単一のホスト上のすべてのノードで共有する方法について説明します。この例は、ベアメタルホストに特に該当します。

この例を理解するために、各データセンターにグリッドネットワーク、管理ネットワーク、クライアントネットワーク用に 3 つのサブネットがあるとします。サブネットは個別の VLAN （ 1001 、 1002 、 1003 ）上にあり、 LACP ボンディングされたトランクポート（ bond0 ）でホストに提示されます。この場合、ボンドに bond0.1001 、 bond0.1002 、および bond0.1003 の 3 つの VLAN インターフェイスを設定します。

同じホスト上のノードネットワークに別々の VLAN とサブネットが必要な場合は、ボンドに VLAN インターフェイスを追加してホストにマッピングできます（図の bond0.1004 と表示）。

image::../media/rhel_install_vlan_diag_2.gif[この図には説明が付随しています。]

.手順
. StorageGRID ネットワークの接続に使用するすべての物理ネットワークインターフェイスを単一の LACP ボンドとしてまとめます。
+
すべてのホストのボンドに同じ名前（ bond0 など）を使用してください。

. このボンドを関連する「物理デバイス」として使用するVLANインターフェイスを作成します,`" using the standard VLAN interface naming convention `physdev-name.VLAN ID`。
+
手順 1 と 2 のそれぞれについて、ネットワークリンクの反対側の終端にあるエッジスイッチで適切な設定を行う必要があります。エッジスイッチのポートも LACP ポートチャネルに集約してトランクとして設定し、必要なすべての VLAN を許可する必要があります。

+
このホストごとのネットワーク構成スキームに使用できるサンプルのインターフェイス構成ファイルが提供されています。



.関連情報
link:example-etc-network-interfaces.html["/etc/network/interfaces の例"]
