---
permalink: admin/kms-adding-upload-client-certificates.html 
sidebar: sidebar 
keywords:  
summary: キー管理サーバの追加ウィザードの手順3\（クライアント証明書のアップロード\）で、クライアント証明書とクライアント証明書の秘密鍵をアップロードします。クライアント証明書は、 StorageGRID が KMS に対して自身を認証することを許可します。 
---
= 手順 3 ：クライアント証明書をアップロードする
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
キー管理サーバの追加ウィザードの手順 3 （クライアント証明書をアップロード）で、クライアント証明書とクライアント証明書の秘密鍵をアップロードします。クライアント証明書は、 StorageGRID が KMS に対して自身を認証することを許可します。

.手順
. * 手順 3 （クライアント証明書をアップロード） * から、クライアント証明書の場所を参照します。
+
image::../media/kms_step_3_upload_client_certificate.png[KMS ステップ 3 クライアント証明書のアップロード]

. クライアント証明書ファイルをアップロードします。
+
クライアント証明書のメタデータが表示されます。

. クライアント証明書の秘密鍵の場所を参照します。
. 秘密鍵ファイルをアップロードします。
+
クライアント証明書とクライアント証明書の秘密鍵のメタデータが表示されます。

+
image::../media/kms_step_3_client_certificate_metadata.png[KMS ステップ 3 ：クライアント証明書メタデータ]

. [ 保存（ Save ） ] を選択します。
+
キー管理サーバとアプライアンスノードの間の接続をテストします。すべての接続が有効で、正しいキーが KMS にある場合は、新しいキー管理サーバが Key Management Server ページの表に追加されます。

+

NOTE: KMS を追加すると、すぐに [Key Management Server] ページの証明書ステータスが [Unknown （不明） ] と表示されます。各証明書の実際のステータスの StorageGRID 取得には 30 分程度かかる場合があります。最新のステータスを表示するには、 Web ブラウザの表示を更新する必要があります。

. 「 * Save * （保存）」を選択したときにエラーメッセージが表示された場合は、メッセージの詳細を確認し、「 * OK * 」を選択します。
+
たとえば、接続テストに失敗した場合は、 422 ： Unprocessable Entity エラーが返されることがあります。

. 外部接続をテストせずに現在の設定を保存する必要がある場合は、 * 強制保存 * を選択します。
+
image::../media/kms_force_save.png[KMS 強制保存]

+

IMPORTANT: [ 強制保存 ] を選択すると KMS の設定が保存されますが、各アプライアンスからその KMS への外部接続はテストされません。構成を含む問題 がある場合、該当するサイトでノード暗号化が有効になっているアプライアンスノードをリブートできない可能性があります。問題が解決するまでデータにアクセスできなくなる可能性があります。

. 確認の警告を確認し、設定を強制的に保存する場合は、「 * OK 」を選択します。
+
image::../media/kms_force_save_warning.png[KMS 強制保存の警告]

+
KMS の設定は保存されますが、 KMS への接続はテストされません。


